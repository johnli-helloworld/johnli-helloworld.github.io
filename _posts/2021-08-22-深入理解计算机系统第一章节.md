---
layout:     post
title:      计算机系统漫游
subtitle:   深入理解计算机系统第一章
date:       2021-08-22
author:     xiaoli
header-img: img/post-bg-re-vs-ng2.jpg
catalog: true
tags:
    - 计算机
---

# 计算机系统漫游
计算机系统是由硬件和软件组成的，他们共同工作来运行应用程序

## 信息就是位 + 上下文
源程序实际上就是一个由值0和1组成的**位**（又称为比特）序列，8个被组织成一组称为**字节**。每个字节表示程序中的某些文本字符。

基本思想：系统中所有的信息---包括磁盘文件、内存中的程序、内存中存放的用户数据以及网络上传送的数据，都是由一串比特表示的。区分不同数据对象的唯一方法是我们读到这些数据对象时的上下文。

## 程序如何被编译的

在Unix系统上，从源文件到目标文件的转化时由编译器驱动程序完成的：

![](/computer-system/1-0.jpg)

## 处理器读并解释存储在内存中的指令

#### 系统的硬件组成

![](/computer-system/1-6.jpg)

> 1. 总线

贯穿整个系统的时一组电子管道，称作总线。它携带信息字节并负责在各个部件间传递。通常总线被设计成传送定长的字节块即**字（word）** 字中的字节数（字长）时基本系统参数，且各个系统不尽相同。如现在大多数机器要么时4字节（32位）或8字节（64位）

> 2. I/O 设备

I/O(输入输出)设备时系统与外部世界的联系通道。 每个I/O设别都通过一个控制器或适配器与I/O总线相连。控制器和适配器之间的区别主要在于他们的封装方式。控制器是I/O设备本身或者系统的主印制电路板(通常称作主板)上的芯片组.而适配器则是一块插在主板插槽上的卡。它们的功能都是在I/O总线和I/O设备之间传递信息

> 3. 主存

主存是一个临时存储设备,在处理器执行程序时,用来存放程序和程序处理的数据。从物理上来说, 主存是一组由**动态随机存储器(DRAM)**芯片组成的。从逻辑上来说, 存储器是一个线性的字节数组, 每个字节都有其唯一的地址(数组索引),这些地址是从零开始的。

> 4. 处理器

**中央处理单元(CPU)**, 简称处理器, 是解释(或执行)存储在主存中指令的引擎。处理器的核心是一个大小为一个字的存储设备(或**寄存器**), 称为**程序计数器(PC)**。在任何时刻, PC都指向主存中的某条机器语言指令(指含有该条指令的地址)。

处理器看上去是它的指令集架构的简单实现, 但是实际上现代处理器使用了非常复杂的机制来加速程序的执行。因此, 我们将处理器的指令集架构和处理器的微体系结构区分开来: **指令集架构**描述的是每条机器代码指令的效果; 而**微体系结构**描述的是处理器实际上是如何实现的

#### 程序如何运行

![](/computer-system/1-1.jpg)
初始时, shell执行它的指令等待我们输入命令。当接收到我们键入的"./hello" 后shell程序将字符读入寄存器再把他放到内存中,回车键shell知道我们结束了指令, 开始执行一系列的指令来加载可执行的hello文件, 这些指令将hell目标文件中的代码和数据从磁盘复制到主存。

一旦目标文件hello中的代码和数据被加载到了主存, 处理器就开始执行hello程序的main程序中的机器语言指令。这些指令将"hello, world\n" 字符串中的字节从主存中复制到寄存器文件, 再从寄存器文件复制到显示设备

## 高速缓存

根据机械原理, 较大的存储设备比较小的存储设备运行的慢, 处理器从寄存器文件中读取数据比从主存中读取几乎快100倍。针对这种处理器和主存之间的差异, 系统设计者采用了更小更快的存储设备, 称为**高速缓存存储器**简称cache, 作为暂时的集结区域, 存放处理器近期可能会需要的信息。

## 存储设备形成层次结构
存储器层次结构的主要思想时上一层的存储器作为低一层的存储器的高速缓存,例如寄存器文件就是L1的高速缓存....

![](/computer-system/1-4.jpg)

## 操作系统管理硬件
我们可以把操作系统看成是应用程序和硬件之间插入的一层软件

![](/computer-system/1-5.jpg)

操作系统的两个基本功能: (1) 防止硬件被失控的应用程序滥用 (2) 向应用程序提供简单一致的机制来控制复杂而又通常不相同的低级硬件设备。操作系统通过几个基本的抽象概念来实现这两个功能。

![](/computer-system/1-3.jpg)
 
如图, 文件是对I/O设备的抽象表示, 虚拟内存是对主存和磁盘I/O设备的抽象表示, 进程则是对处理器、主存和I/O设备的抽象表示
